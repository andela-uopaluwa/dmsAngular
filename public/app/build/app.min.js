"use strict";function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,n){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,n.createDoc(t).then(function(t){location.reload(),e.cancel()})}}angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showCreateModal=function(){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["e","t","o","n"],angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"
}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["e","t","o","n"],angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["e","t","o","n"],angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("indigo").warnPalette("green")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("indigo").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("grey").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["e","t","o","n"],angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red");
}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({
email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){
t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){
var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");
return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),
angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){
e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.fly="wings",e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){
o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){
return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.tree="green",e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){
o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(e){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),targetEvent:e,clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showAdvanced=function(){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showCreateModal=function(){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showCreateModal=function(){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"user account created"===o.data.message||"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showCreateModal=function(){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"username taken"===o.data.message?e.wrongUsername=!0:"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showCreateModal=function(){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"username taken"===o.data.message?e.wrongUsername=!0:"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){
n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showCreateModal=function(){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1,e.progressLoad=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0,e.progressLoad=!1):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"username taken"===o.data.message?e.wrongUsername=!0:"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showCreateModal=function(){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"username taken"===o.data.message?e.wrongUsername=!0:"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showCreateModal=function(){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"username taken"===o.data.message?e.wrongUsername=!0:"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showCreateModal=function(){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"username taken"===o.data.message?e.wrongUsername=!0:"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showCreateModal=function(){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"username taken"===o.data.message?e.wrongUsername=!0:"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showCreateModal=function(){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"username taken"===o.data.message?e.wrongUsername=!0:"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showCreateModal=function(){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"username taken"===o.data.message?e.wrongUsername=!0:"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){
e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showCreateModal=function(){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"username taken"===o.data.message?e.wrongUsername=!0:"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showCreateModal=function(){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"username taken"===o.data.message?e.wrongUsername=!0:"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showCreateModal=function(){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"username taken"===o.data.message?e.wrongUsername=!0:"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showCreateModal=function(){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"username taken"===o.data.message?e.wrongUsername=!0:"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showCreateModal=function(){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"username taken"===o.data.message?e.wrongUsername=!0:"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showCreateModal=function(){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"username taken"===o.data.message?e.wrongUsername=!0:"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showCreateModal=function(){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,
e.wrongPassword=!1):"username taken"===o.data.message?e.wrongUsername=!0:"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showCreateModal=function(){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,n,r,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){r.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,n,r){t.signupCheck=function(){localStorage.getItem("userToken")&&n.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),n.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"username taken"===o.data.message?e.wrongUsername=!0:"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,n,r,a){function c(e,t,n){e.editMode=n.editMode,o.getCurrentDoc(n.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):n.url("/home"),e.visibility=!0,e.toggleVisibility=function(){e.visibility===!0?e.visibility=!1:e.visibility=!0},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(n){n.ownerId=t.userId,o.createDoc(n).then(function(t){e.fetchMyDocs()})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showCreateModal=function(){a.show({controller:DialogController,templateUrl:"../../app/views/createdoc.view.html",parent:angular.element(document.body),clickOutsideToClose:!1})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,n.url("/home")}}]),DialogController.$inject=["$scope","$mdDialog","$rootScope","UserService"],angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,n,r){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),n.userName=t.firstname,n.userId=t._id,n.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]);