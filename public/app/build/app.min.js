"use strict";function DialogController(e,t,o,r){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,r.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,r){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,r.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,r){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,r.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,r){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,r.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,r){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,r.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,r){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,r.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,r){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,r.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,r){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,r.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,r){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,r.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,r){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,r.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,r){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,r.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,r){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,r.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,r){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,r.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,r){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,r.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,r){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,r.createDoc(t).then(function(t){location.reload(),e.cancel()})}}function DialogController(e,t,o,r){e.hide=function(){t.hide()},e.cancel=function(){t.cancel()},e.createNewDoc=function(t){t.ownerId=o.userId,r.createDoc(t).then(function(t){location.reload(),e.cancel()})}}angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("profile",{url:"/userprofile",templateUrl:"app/views/profilepage.view.html",controller:"userCtrl"}).state("create",{url:"/createdoc",templateUrl:"app/views/createdoc.view.html",controller:"userCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("profile",{url:"/userprofile",templateUrl:"app/views/profilepage.view.html",controller:"userCtrl"}).state("create",{url:"/createdoc",templateUrl:"app/views/createdoc.view.html",controller:"userCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("profile",{url:"/userprofile",templateUrl:"app/views/profilepage.view.html",controller:"userCtrl"}).state("create",{url:"/createdoc",templateUrl:"app/views/createdoc.view.html",controller:"userCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("profile",{url:"/userprofile",templateUrl:"app/views/profilepage.view.html",controller:"userCtrl"}).state("create",{url:"/createdoc",templateUrl:"app/views/createdoc.view.html",controller:"userCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("profile",{url:"/userprofile",templateUrl:"app/views/profilepage.view.html",controller:"userCtrl"}).state("create",{url:"/createdoc",templateUrl:"app/views/createdoc.view.html",controller:"userCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("profile",{url:"/userprofile",templateUrl:"app/views/profilepage.view.html",controller:"userCtrl"}).state("create",{url:"/createdoc",templateUrl:"app/views/createdoc.view.html",controller:"userCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("profile",{url:"/userprofile",templateUrl:"app/views/profilepage.view.html",controller:"userCtrl"}).state("create",{url:"/createdoc",templateUrl:"app/views/createdoc.view.html",controller:"userCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("profile",{url:"/userprofile",templateUrl:"app/views/profilepage.view.html",controller:"userCtrl"}).state("create",{url:"/createdoc",templateUrl:"app/views/createdoc.view.html",controller:"userCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("profile",{url:"/userprofile",templateUrl:"app/views/profilepage.view.html",controller:"userCtrl"}).state("create",{url:"/createdoc",templateUrl:"app/views/createdoc.view.html",controller:"userCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("profile",{url:"/userprofile",templateUrl:"app/views/profilepage.view.html",controller:"userCtrl"}).state("create",{url:"/createdoc",templateUrl:"app/views/createdoc.view.html",controller:"userCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("profile",{url:"/userprofile",templateUrl:"app/views/profilepage.view.html",controller:"userCtrl"}).state("create",{url:"/createdoc",templateUrl:"app/views/createdoc.view.html",controller:"userCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("profile",{url:"/userprofile",templateUrl:"app/views/profilepage.view.html",controller:"userCtrl"}).state("create",{url:"/createdoc",templateUrl:"app/views/createdoc.view.html",controller:"userCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("profile",{url:"/userprofile",templateUrl:"app/views/profilepage.view.html",controller:"userCtrl"}).state("create",{url:"/createdoc",templateUrl:"app/views/createdoc.view.html",controller:"userCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("profile",{url:"/userprofile",templateUrl:"app/views/profilepage.view.html",controller:"userCtrl"}).state("create",{url:"/createdoc",templateUrl:"app/views/createdoc.view.html",controller:"userCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("profile",{url:"/userprofile",templateUrl:"app/views/profilepage.view.html",controller:"userCtrl"}).state("create",{url:"/createdoc",templateUrl:"app/views/createdoc.view.html",controller:"userCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp",["ui.router","ngMaterial","ngMdIcons"]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("homepage",{url:"/home",templateUrl:"app/views/login.html",controller:"homeCtrl"}).state("profile",{url:"/userprofile",templateUrl:"app/views/profilepage.view.html",controller:"userCtrl"}).state("create",{url:"/createdoc",templateUrl:"app/views/createdoc.view.html",controller:"userCtrl"}).state("userhome",{url:"/userhome",templateUrl:"app/views/userhome.html",controller:"userCtrl"}),t.otherwise("/home")}]),angular.module("dmsApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("blue").accentPalette("light-blue").warnPalette("red")}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,r,n,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){n.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,r.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,r,n){t.signupCheck=function(){localStorage.getItem("userToken")&&r.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),r.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"username taken"===o.data.message?e.wrongUsername=!0:"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,r,n,a){function c(e,t,r){e.editMode=r.editMode,o.getCurrentDoc(r.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):(console.log("trigger home"),r.url("/home")),e.toProfile=function(){r.url("/userprofile")},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(e){e.ownerId=t.userId,o.createDoc(e).then(function(e){r.url("/userhome")})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showCreateModal=function(){r.url("/createdoc")},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,r.url("/home")}}]),angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,r,n){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),r.userName=t.firstname,r.userId=t._id,r.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,r,n,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){n.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,r.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,r,n){t.signupCheck=function(){localStorage.getItem("userToken")&&r.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),r.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"username taken"===o.data.message?e.wrongUsername=!0:"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,r,n,a){function c(e,t,r){e.editMode=r.editMode,o.getCurrentDoc(r.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):(console.log("trigger home"),r.url("/home")),e.toProfile=function(){r.url("/userprofile")},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(e){e.ownerId=t.userId,o.createDoc(e).then(function(e){r.url("/userhome")})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showCreateModal=function(){r.url("/createdoc")},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,r.url("/home")}}]),angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,r,n){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),r.userName=t.firstname,r.userId=t._id,r.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,r,n,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){n.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,r.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,r,n){t.signupCheck=function(){localStorage.getItem("userToken")&&r.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),r.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"username taken"===o.data.message?e.wrongUsername=!0:"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,r,n,a){function c(e,t,r){e.editMode=r.editMode,o.getCurrentDoc(r.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):(console.log("trigger home"),r.url("/home")),e.toProfile=function(){r.url("/userprofile")},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(e){e.ownerId=t.userId,o.createDoc(e).then(function(e){r.url("/userhome")})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showCreateModal=function(){r.url("/createdoc")},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,r.url("/home")}}]),angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,r,n){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),r.userName=t.firstname,r.userId=t._id,r.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,r,n,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){n.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,r.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,r,n){t.signupCheck=function(){localStorage.getItem("userToken")&&r.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),r.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"username taken"===o.data.message?e.wrongUsername=!0:"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,r,n,a){function c(e,t,r){e.editMode=r.editMode,o.getCurrentDoc(r.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):(console.log("trigger home"),r.url("/home")),e.toProfile=function(){r.url("/userprofile")},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(e){e.ownerId=t.userId,o.createDoc(e).then(function(e){r.url("/userhome")})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showCreateModal=function(){r.url("/createdoc")},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,r.url("/home")}}]),angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,r,n){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),r.userName=t.firstname,r.userId=t._id,r.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t);
},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,r,n,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){n.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,r.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,r,n){t.signupCheck=function(){localStorage.getItem("userToken")&&r.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),r.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"username taken"===o.data.message?e.wrongUsername=!0:"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,r,n,a){function c(e,t,r){e.editMode=r.editMode,o.getCurrentDoc(r.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):(console.log("trigger home"),r.url("/home")),e.toProfile=function(){r.url("/userprofile")},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(e){e.ownerId=t.userId,o.createDoc(e).then(function(e){r.url("/userhome")})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showCreateModal=function(){r.url("/createdoc")},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,r.url("/home")}}]),angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,r,n){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),r.userName=t.firstname,r.userId=t._id,r.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,r,n,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){n.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,r.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,r,n){t.signupCheck=function(){localStorage.getItem("userToken")&&r.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),r.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"username taken"===o.data.message?e.wrongUsername=!0:"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,r,n,a){function c(e,t,r){e.editMode=r.editMode,o.getCurrentDoc(r.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):(console.log("trigger home"),r.url("/home")),e.toProfile=function(){r.url("/userprofile")},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(e){e.ownerId=t.userId,o.createDoc(e).then(function(e){r.url("/userhome")})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showCreateModal=function(){r.url("/createdoc")},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,r.url("/home")}}]),angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,r,n){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),r.userName=t.firstname,r.userId=t._id,r.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,r,n,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){n.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,r.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,r,n){t.signupCheck=function(){localStorage.getItem("userToken")&&r.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),r.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"username taken"===o.data.message?e.wrongUsername=!0:"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,r,n,a){function c(e,t,r){e.editMode=r.editMode,o.getCurrentDoc(r.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):(console.log("trigger home"),r.url("/home")),e.toProfile=function(){r.url("/userprofile")},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(e){e.ownerId=t.userId,o.createDoc(e).then(function(e){r.url("/userhome")})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.showCreateModal=function(){r.url("/createdoc")},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,r.url("/home")}}]),angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,r,n){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),r.userName=t.firstname,r.userId=t._id,r.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,r,n,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){n.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,r.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,r,n){t.signupCheck=function(){localStorage.getItem("userToken")&&r.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),r.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"username taken"===o.data.message?e.wrongUsername=!0:"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,r,n,a){function c(e,t,r){e.editMode=r.editMode,o.getCurrentDoc(r.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):(console.log("trigger home"),r.url("/home")),e.toProfile=function(){r.url("/userprofile")},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(e){e.ownerId=t.userId,o.createDoc(e).then(function(e){r.url("/userhome")})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.toCreateView=function(){r.url("/createdoc")},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,r.url("/home")}}]),angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,r,n){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),r.userName=t.firstname,r.userId=t._id,r.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,r,n,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){n.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,r.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,r,n){t.signupCheck=function(){localStorage.getItem("userToken")&&r.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),r.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"username taken"===o.data.message?e.wrongUsername=!0:"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,r,n,a){function c(e,t,r){e.editMode=r.editMode,o.getCurrentDoc(r.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):(console.log("trigger home"),r.url("/home")),e.toProfile=function(){r.url("/userprofile")},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(e){e.ownerId=t.userId,o.createDoc(e).then(function(e){r.url("/userhome")})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.toCreateView=function(){r.url("/createdoc")},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,r.url("/home")}}]),angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,r,n){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),r.userName=t.firstname,r.userId=t._id,r.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,r,n,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){n.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,r.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,r,n){t.signupCheck=function(){localStorage.getItem("userToken")&&r.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),r.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"username taken"===o.data.message?e.wrongUsername=!0:"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,r,n,a){function c(e,t,r){e.editMode=r.editMode,o.getCurrentDoc(r.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):(console.log("trigger home"),r.url("/home")),e.toProfile=function(){r.url("/userprofile")},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(e){e.ownerId=t.userId,o.createDoc(e).then(function(e){r.url("/userhome")})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.toCreateView=function(){r.url("/createdoc")},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,r.url("/home")}}]),angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,r,n){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),r.userName=t.firstname,r.userId=t._id,r.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,r,n,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){n.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,r.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,r,n){t.signupCheck=function(){localStorage.getItem("userToken")&&r.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),r.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"username taken"===o.data.message?e.wrongUsername=!0:"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,r,n,a){function c(e,t,r){e.editMode=r.editMode,o.getCurrentDoc(r.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):(console.log("trigger home"),r.url("/home")),e.toProfile=function(){r.url("/userprofile")},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(e){e.ownerId=t.userId,o.createDoc(e).then(function(e){r.url("/userhome")})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.toCreateView=function(){r.url("/createdoc")},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,r.url("/home")}}]),angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,r,n){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),r.userName=t.firstname,r.userId=t._id,r.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,r,n,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){n.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,r.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,r,n){t.signupCheck=function(){localStorage.getItem("userToken")&&r.url("/userhome");
},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),r.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"username taken"===o.data.message?e.wrongUsername=!0:"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,r,n,a){function c(e,t,r){e.editMode=r.editMode,o.getCurrentDoc(r.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):(console.log("trigger home"),r.url("/home")),e.toProfile=function(){r.url("/userprofile")},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(e){e.ownerId=t.userId,o.createDoc(e).then(function(e){r.url("/userhome")})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.toCreateView=function(){r.url("/createdoc")},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,r.url("/home")}}]),angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,r,n){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),r.userName=t.firstname,r.userId=t._id,r.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,r,n,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){n.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,r.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,r,n){t.signupCheck=function(){localStorage.getItem("userToken")&&r.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),r.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"username taken"===o.data.message?e.wrongUsername=!0:"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,r,n,a){function c(e,t,r){e.editMode=r.editMode,o.getCurrentDoc(r.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):r.url("/home"),e.toProfile=function(){r.url("/userprofile")},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(e){e.ownerId=t.userId,o.createDoc(e).then(function(e){r.url("/userhome")})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.toCreateView=function(){r.url("/createdoc")},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,r.url("/home")}}]),angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,r,n){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),r.userName=t.firstname,r.userId=t._id,r.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,r,n,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){n.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,r.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,r,n){t.signupCheck=function(){localStorage.getItem("userToken")&&r.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),r.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"username taken"===o.data.message?e.wrongUsername=!0:"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,r,n,a){function c(e,t,r){e.editMode=r.editMode,o.getCurrentDoc(r.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):r.url("/home"),e.toProfile=function(){r.url("/userprofile")},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(e){e.ownerId=t.userId,o.createDoc(e).then(function(e){r.url("/userhome")})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.toCreateView=function(){r.url("/createdoc")},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,r.url("/home")}}]),angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,r,n){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),r.userName=t.firstname,r.userId=t._id,r.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,r,n,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){n.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,r.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,r,n){t.signupCheck=function(){localStorage.getItem("userToken")&&r.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),r.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"username taken"===o.data.message?e.wrongUsername=!0:"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,r,n,a){function c(e,t,r){e.editMode=r.editMode,o.getCurrentDoc(r.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):r.url("/home"),e.toProfile=function(){r.url("/userprofile")},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(e){e.ownerId=t.userId,o.createDoc(e).then(function(e){r.url("/userhome")})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.toCreateView=function(){r.url("/createdoc")},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,r.url("/home")}}]),angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,r,n){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),r.userName=t.firstname,r.userId=t._id,r.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]),angular.module("dmsApp").controller("editCtrl",["$scope","$rootScope","UserService","$location","$state","$stateParams",function(e,t,o,r,n,a){o.getCurrentDoc(a.doc_id).then(function(t){e.doc=t.data}),e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.editDoc=function(e){o.editDoc(e).then(function(e){n.go("userhome")})},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,r.url("/home")}}]),angular.module("dmsApp").controller("homeCtrl",["$scope","$rootScope","UserService","$location","$state",function(e,t,o,r,n){t.signupCheck=function(){localStorage.getItem("userToken")&&r.url("/userhome")},e.login=function(t){o.authenticate(t).then(function(t){"Authentication failed. User not found."===t.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"Authentication failed. Wrong password."===t.data.message?(e.wrongEmail=!1,e.wrongPassword=!0):(localStorage.setItem("userToken",t.data.token),o.decodeUser(),r.url("/userhome"))})},e.signUp=function(t){o.createUser(t).then(function(o){"user email taken"===o.data.message?(e.wrongEmail=!0,e.wrongPassword=!1):"username taken"===o.data.message?e.wrongUsername=!0:"user account created"===o.data.message&&e.login({email:t.email,password:t.password})})}}]),angular.module("dmsApp").controller("userCtrl",["$scope","$rootScope","UserService","$location","$state","$mdDialog",function(e,t,o,r,n,a){function c(e,t,r){e.editMode=r.editMode,o.getCurrentDoc(r.docId).then(function(t){e.doc=t.data}),e.editDoc=function(t){o.editDoc(t).then(function(t){e.cancel(),location.reload()})},e.cancel=function(){t.cancel()}}localStorage.getItem("userToken")?(o.decodeUser(),o.getCurrentUser(t.userId).then(function(t){e.user=t.data.user})):r.url("/home"),e.toProfile=function(){r.url("/userprofile")},e.toUserhome=function(){r.url("/userhome")},e.editMode=!0,e.toggleMode=function(){e.editMode=!e.editMode},e.editProfile=function(t){o.editProfile(t).then(function(t){e.user=t.data.user,localStorage.setItem("userToken",t.data.token),e.editMode=!0})},e.showEditModal=function(e,o){t.docId=e,t.editMode=o,a.show({controller:c,templateUrl:"../../app/views/editview.html",parent:angular.element(document.body),clickOutsideToClose:!0})},c.$inject=["$scope","$mdDialog","$rootScope"],e.fetchMyDocs=function(){o.getUserDocs(t.userId).then(function(t){e.userDocs=t.data})},e.createNewDoc=function(e){e.ownerId=t.userId,o.createDoc(e).then(function(e){r.url("/userhome")})},e.deleteUser=function(t){o.deleteUser(t).then(function(t){"Succesfully deleted"===t.data.message&&e.logout()})},e.deleteDocument=function(t){o.deleteDoc(t).then(function(t){e.fetchMyDocs()})},e.toCreateView=function(){r.url("/createdoc")},e.logout=function(){localStorage.removeItem("userToken"),t.loggedIn=!1,r.url("/home")}}]),angular.module("dmsApp").value("baseUrl","http://localhost:8080/api/"),angular.module("dmsApp").factory("UserService",["$http","$stateParams","$location","$rootScope","baseUrl",function(e,t,o,r,n){function a(e){var t=e.replace("-","+").replace("_","/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return window.atob(t)}return{createUser:function(t){return e.post("/api/users",t)},getCurrentUser:function(t){var o=localStorage.getItem("userToken");return e.get("api/users/"+t+"?token="+o)},getAllUsers:function(){return e.get("/api/users")},editProfile:function(t){var o=localStorage.getItem("userToken");return e.put("/api/users/"+t._id+"?token="+o,t)},deleteUser:function(t){var o=localStorage.getItem("userToken");return e["delete"]("api/users/"+t+"?token="+o)},getUserDocs:function(t){var o=localStorage.getItem("userToken");return e.get("/api/users/"+t+"/documents?token="+o)},getCurrentDoc:function(t){return e.get("/api/documents/"+t)},authenticate:function(t){return e.post("/api/users/login",t)},decodeUser:function(){if(localStorage.getItem("userToken")){var e=localStorage.getItem("userToken"),t={};if(e){var o=e.split(".")[1];t=JSON.parse(a(o)),r.userName=t.firstname,r.userId=t._id,r.loggedIn=!0}}},createDoc:function(t){var o=localStorage.getItem("userToken");return e.post("/api/documents?token="+o,t)},editDoc:function(t){var o=localStorage.getItem("userToken");return e.put("/api/documents/"+t._id+"?token="+o,t)},deleteDoc:function(t){var o=localStorage.getItem("userToken");return e["delete"]("/api/documents/"+t+"?token="+o)}}}]);